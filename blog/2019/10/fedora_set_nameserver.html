<!DOCTYPE html><html lang="en">
    <head>
<meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no"/>
        <title>Working in Progress</title>
        <link rel="stylesheet" href="/css/main.css"/>
        <link rel="stylesheet" href="/css/zenburn.css"/>
        
        
    </head><body class="is-preload">
        <div id="wrapper">
            <div id="main">
                <div class="inner">
                    <header id="header">
                        <a href="/index.html" class="logo">
                            <strong>
                                WORKING IN PROGRESS
                            </strong> - POST
                        </a><ul class="icons">
                            <li>
                                <a href="https://twitter.com/marioggar" class="icon fa-twitter">
                                    <span class="label">
                                        Twitter
                                    </span>
                                </a>
                            </li><li>
                                <a href="https://github.com/mariogarcia" class="icon fa-github">
                                    <span class="label">
                                        Github
                                    </span>
                                </a>
                            </li>
                        </ul>
                    </header><section><header class="main"><div class="metadata"><em class="fa fa-calendar-o"></em><b>2019-10-15</b></div><h1>Configuring resolv.conf in Fedora 30</h1></header><yieldScaped><div class="sect1">
<h2 id="intro">Intro</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;ve recently configured a DNS server at home and I&#8217;d like to
resolve all server names through it. For that every time
I try to resolve any domain name I have to make sure the
first DNS hit is mine.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resolv_conf">resolv.conf</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Normally my linux distro (Fedora 30) will look into the
<strong>/etc/resolv.conf</strong> file and ask the servers put in there
in order from top to bottom:</p>
</div>
<div class="listingblock">
<div class="title">/etc/resolv.conf</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell"># Generated by NetworkManager
search Home
nameserver 8.8.8.8
nameserver 4.4.4.4</code></pre>
</div>
</div>
<div class="paragraph">
<p>So the idea is to add a <strong>nameserver</strong> entry on top of
the rest and that&#8217;s it. I can do that, but the problem
is that this file is generated everytime the system
reboots, so I&#8217;d be happy just until I shutdown the
system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="networkmanager_conf">NetworkManager.conf</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to make my system stop regenerating the
<strong>/etc/resolv.conf</strong> file is to tell it so in the
<strong>/etc/NetworkManager/NetworkManager.conf</strong>. You
only need to add <strong>dns=none</strong> inside the <strong>[main]</strong>
section.</p>
</div>
<div class="listingblock">
<div class="title">/etc/NetworkManager/NetworkManager.conf</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">[main]
dns=none</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now go back to your <strong>resolv.conf</strong> file and
add the new DNS entry:</p>
</div>
<div class="listingblock">
<div class="title">/etc/resolv.conf</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">search Home
nameserver 192.168.1.89
nameserver 8.8.8.8
nameserver 4.4.4.4</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Remember to add it on top of the rest <strong>nameserver</strong>
entries
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally the only thing remaining to see the
changes is to restart the network.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restart_network">Restart network</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Fedora you can just restart your network service by executing:</p>
</div>
<div class="listingblock">
<div class="title">restart network service</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">nmcli con reload eth0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <strong>eth0</strong> is the name of the network interface you&#8217;re
reloading</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>How to set DNS resolver in Fedora [<a href="https://unix.stackexchange.com/questions/90035/how-to-set-dns-resolver-in-fedora-using-network-manager" class="bare">https://unix.stackexchange.com/questions/90035/how-to-set-dns-resolver-in-fedora-using-network-manager</a>]</p>
</li>
<li>
<p>How to <a href="https://serverfault.com/questions/982376/how-do-you-restart-the-network-service-on-fedora-30">restart the network service on Fedora 30</a></p>
</li>
</ul>
</div>
</div>
</div></yieldScaped></section>
                </div>
            </div><div id="sidebar">
                <div class="inner">
                    <!--Menu--><nav id="menu">
                        <header class="major">
                            <h2>Menu</h2>
                        </header><ul>
                            <li>
                                <a href="/index.html">Latests entries</a>
                            </li><li>
                                <a href="/archive.html">Archive</a>
                            </li><li>
                                <a href="/about.html">About</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div><script src="/js/jquery.min.js"></script>
            <script src="/js/browser.min.js"></script>
            <script src="/js/breakpoints.min.js"></script>
            <script src="/js/util.js"></script>
            <script src="/js/main.js"></script>
            <script src="/js/highlight.pack.js"></script>
            <script type="text/javascript">
                
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });
    
            </script>
        </div>
    </body>
</html>
