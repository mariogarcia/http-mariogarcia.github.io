<!DOCTYPE html><html lang="en">
    <head>
<meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no"/>
        <title>Working in Progress</title>
        <link rel="stylesheet" href="/css/main.css"/>
        <link rel="stylesheet" href="/css/zenburn.css"/>
        
        
    </head><body class="is-preload">
        <div id="wrapper">
            <div id="main">
                <div class="inner">
                    <header id="header">
                        <a href="/index.html" class="logo">
                            <strong>
                                WORKING IN PROGRESS
                            </strong> - POST
                        </a><ul class="icons">
                            <li>
                                <a href="/feed.xml" class="icon fa-rss">
                                    <span class="label">
                                        Twitter
                                    </span>
                                </a>
                            </li><li>
                                <a href="https://twitter.com/marioggar" class="icon fa-twitter">
                                    <span class="label">
                                        Twitter
                                    </span>
                                </a>
                            </li><li>
                                <a href="https://github.com/mariogarcia" class="icon fa-github">
                                    <span class="label">
                                        Github
                                    </span>
                                </a>
                            </li>
                        </ul>
                    </header><section><header class="main"><div class="metadata"><em class="fa fa-calendar-o"></em><b>2018-12-27</b></div><h1>echarts: Linking charts</h1></header><yieldScaped><div class="sect2">
<h3 id="motivation">Motivation</h3>
<div class="paragraph">
<p>I need to link two different charts at work. The motivation is that
one chart is showing the data and the other one just quickly shows
where you can find a peak. The chart on the top is going to be of type
'line` and the chart at the bottom is going to be of type 'bar'.</p>
</div>
</div>
<div class="sect2">
<h3 id="requirements">Requirements</h3>
<div class="paragraph">
<p>Both charts have to be synchronized to each other in order to show
peaks aligned with data above and also to keep it proportional when
using the zoom feature in the upper chart.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the chart showing the hot areas I could have used oneof type
<code>line</code>, and then showing the area created by those lines. The problem
is that at the moment you can&#8217;t register a click event on the area,
and I needed to allow the user to click over the area to show more
information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Summary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To see a <strong>guiding line</strong> to see where the cursor is in both charts</p>
</li>
<li>
<p>To be able to register a click event on the chart below</p>
</li>
<li>
<p>Keep line <strong>chart points aligned with the bars below</strong></p>
</li>
<li>
<p><strong>Keep proportionality</strong> in the bar chart <strong>when zooming</strong> in the line chart</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="result">Result</h3>
<div id="echarts_main" style="width: 80%;height:400px;"></div>
<div id="echarts_secondary" style="width: 80%;height:200px;"></div>
<div id="echarts_info" style="width: 20%; height: 50px; border: 1px solid #ccc; padding: 10px;text-align: center;"></div>
<script type="text/javascript">
    window.onload = () => {
        var firstChart = echarts.init(document.getElementById('echarts_main'));
        var secondChart = echarts.init(document.getElementById('echarts_secondary'));

        var firstOptions = {
            tooltip: {
              formatter: (params, ticket, callback) => {
                const values = params[0].data

                return `${values[0]} tickets sold at ${values[1]}`
              },
              trigger: 'axis',
            },
            toolbox: {
              feature: {
                dataZoom: {
                    yAxisIndex: 'none',
                    title: {
                      zoom: 'zoom',
                      back: 'back'
                    }
                }
              }
            },
            xAxis: {
               type: 'value',
               axisPointer: {
                 type: 'line'
               }
            },
            yAxis: {
              type: 'value'
            },
            series: [{
                type: 'line',
                data: [
                      [5, 100],
                      [7, 100],
                      [10, 100],
                      [14, 5],
                      [16, 30],
                      [18, 56],
                      [26, 20],
                      [30, 90],
                      [40, 29],
                      [50, 23]
               ]
            }],
            grid: {
              left: '0'
            }
        };

        var secondOptions = {
            tooltip: {
              formatter: 'Click to see information <br/> on the <b>box below</b>',
              trigger: 'axis'
            },
            toolbox: {
              show: false,
              feature: {
                dataZoom: {}
              }
            },
            xAxis: {
               type: 'value',
               axisTick: {
                 show: false
               },
               axisLabel: {
                 show: false
               },
               axisPointer: {
                 type: 'line'
               }
            },
            yAxis: {
              show: false
            },
            series: [{
                type: 'bar',
                emphasis: {
                  label: {
                    show: false
                  },
                  itemStyle: {
                    color: '#cd3138'
                  }
                },
                itemStyle: {
                  color: '#cd3138'
                },
                data: [
                      [5, 100],
                      [7, 100],
                      [10, 100],
                      [14, null],
                      [16, null],
                      [18, 100],
                      [26, null],
                      [30, 100],
                      [40, null],
                      [50, null]
                ]
            }],
            grid: {
              top: '0',
              left: '0'
            }
        };

        firstChart.setOption(firstOptions);
        secondChart.setOption(secondOptions);

        echarts.connect([firstChart, secondChart])
        secondChart.on('click', (params) => {
          document.querySelector('#echarts_info').textContent = `x: ${params.data[0]}`
        })
    }
</script>
</div>
<div class="sect2">
<h3 id="references">References</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://ecomfe.github.io/echarts-doc/public/en/index.html">Echarts site</a></p>
</li>
</ul>
</div>
</div></yieldScaped></section>
                </div>
            </div><div id="sidebar">
                <div class="inner">
                    <!--Menu--><nav id="menu">
                        <header class="major">
                            <h2>Menu</h2>
                        </header><ul>
                            <li>
                                <a href="/index.html">Latests entries</a>
                            </li><li>
                                <a href="/archive.html">Archive</a>
                            </li><li>
                                <a href="/about.html">About</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div><script src="/js/jquery.min.js"></script>
            <script src="/js/browser.min.js"></script>
            <script src="/js/breakpoints.min.js"></script>
            <script src="/js/util.js"></script>
            <script src="/js/main.js"></script>
            <script src="/js/highlight.pack.js"></script>
            <script type="text/javascript">
                
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });
    
            </script><script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.1.0/echarts.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.1.0/echarts-en.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.1.0/echarts.common.min.js"></script>
        </div>
    </body>
</html>
