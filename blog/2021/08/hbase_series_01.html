<!DOCTYPE html><html lang="en">
    <head>
<meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no"/>
        <title>Working in Progress</title>
        <link rel="stylesheet" href="/css/main.css"/>
        <link rel="stylesheet" href="/css/zenburn.css"/>
        
        
    </head><body class="is-preload">
        <div id="wrapper">
            <div id="main">
                <div class="inner">
                    <header id="header">
                        <a href="/index.html" class="logo">
                            <strong>
                                WORKING IN PROGRESS
                            </strong> - POST
                        </a><ul class="icons">
                            <li>
                                <a href="/feed.xml" class="icon fa-rss">
                                    <span class="label">
                                        Twitter
                                    </span>
                                </a>
                            </li><li>
                                <a href="https://twitter.com/marioggar" class="icon fa-twitter">
                                    <span class="label">
                                        Twitter
                                    </span>
                                </a>
                            </li><li>
                                <a href="https://github.com/mariogarcia" class="icon fa-github">
                                    <span class="label">
                                        Github
                                    </span>
                                </a>
                            </li>
                        </ul>
                    </header><section><header class="main"><div class="metadata"><em class="fa fa-calendar-o"></em><b>2021-08-06</b></div><h1>Hbase series: Intro</h1></header><yieldScaped><div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="/img/2021/08/hbase/hbase_logo_with_orca_large.png" alt="Hbase" width="50%">
</div>
<div class="title">Figure 1. Hbase logo</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After a month of playing with Hbase I would like to write down my thoughts and impressions on Hbase. I&#8217;m covering the following topics.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Introduction</p>
</li>
<li>
<p><a href="/blog/2021/08/hbase_series_02.html">Components</a></p>
</li>
<li>
<p><a href="/blog/2021/08/hbase_series_03.html">Data Model</a></p>
</li>
<li>
<p><a href="/blog/2021/08/hbase_series_04.html">Query model</a></p>
</li>
<li>
<p><a href="/blog/2021/08/hbase_series_05.html">API Client</a></p>
</li>
<li>
<p><a href="/blog/2021/08/hbase_series_06.html">Region partition policy</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="why">Why</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The reason I started evaluating Hbase is because I needed to look for a datastore capable of storing up to <strong>1TB/day</strong> and be used as a real time query engine. I&#8217;ve got the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Quick Random Access</strong> Data. I&#8217;d like to be able to update, read a specific record</p>
</li>
<li>
<p><strong>Quick Writes</strong> The system is going to be ingesting up to a TB of data a day, so it better be quick</p>
</li>
<li>
<p><strong>Decent online query responses</strong> to be queried in real time by end users. Whatever is ingested should be available to be queried. And if possible responses under the second would be great.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After a few days of search and asking some friends, I ended up giving <a href="http://hbase.apache.org/">Hbase</a> a go. In theory it seemed to meet all my requirements. According to Hbase site:</p>
</div>
<div class="quoteblock">
<blockquote>
Use Apache HBaseâ„¢ when you need random, realtime read/write access to your Big Data
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features">Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lets go through the main features exposed in Hbase site and my initial comments on them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Strongly consistent reads/writes</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase is not an "eventually consistent" DataStore. This makes it very suitable for tasks such as high-speed counter aggregation.</em></p>
</div>
<div class="paragraph">
<p>To keep long story short, to have consistent reads/writes doesn&#8217;t mean it supports transactions, it means just that, for whatever you insert in Hbase, once it has acknowledge about the insertion, it will be visible for anyone reading.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Automatic sharding</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase tables are distributed on the cluster via regions, and regions are automatically split and re-distributed as your data grows.</em></p>
</div>
<div class="paragraph">
<p>Hbase uses a distributed storage to store data. By default it uses HDFS, but there&#8217;s also the posibility of using S3. Using S3 comes specially handy as it makes your life easier in terms of disk provisioning. The idea of using a distributed storage system is that, data can be dinamically distributed by the system as it grows, so storage could scale horizontally. The primitive used to distribute data between the nodes is called region. Hbase automatically split and re-distributed regions as your data grows</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Automatic RegionServer failover</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As we&#8217;ll see in the following post entry data resides in regions and region servers make regions available to the world. If a region server fails the master server chooses another region server to take over the regions that were handled by the crashing region server.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Hadoop/HDFS Integration</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase supports HDFS out of the box as its distributed file system</em>. As I already mentioned, using a distributed file system brings several benefits, like auto-sharding.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MapReduce</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase supports massively parallelized processing via MapReduce for using HBase as both source and sink.</em> Mainly because there&#8217;re operations that cannot be done via the query API, such as aggregations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Java Client API</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase supports an easy to use Java API for programmatic access</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Thrift/REST API</strong>:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase also supports Thrift and REST for non-Java front-ends.</em></p>
</div>
<div class="paragraph">
<p>I&#8217;ve used Thrift integration with Python. The Thrift server is not up by default so you have to make sure is up and running before using your Hbase-Thrift client.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Block Cache and Bloom Filters</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase supports a Block Cache and Bloom Filters for high volume query optimization</em> These works like a charm, but believe me, nothing is gonna save you from wait forever if you do a query against a billion row database if you don&#8217;t make use of indexing.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Operational Management</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HBase provides build-in web-pages for operational insight as well as JMX metrics</em>. Pretty handy specially when you start learning about Hbase.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="but_keep_in_mind_that">But keep in mind that&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apart from the goodies, there are some ideas that I think are important to keep in mind of before jumping on Hbase:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Hbase only knows about bytes</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That&#8217;s right, no integers, no text, no jsonb, no decimals&#8230;&#8203; no nothing. Is up to you to serialize/deserialize data from/to Hbase in order to do something with it.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>There is only ONE index</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And it&#8217;s super important to know how build your key, because when you want to get a result from a billion row table, if you don&#8217;t narrow down the search by using the keys, you better go on holidays because that query is going to take forever. This sometimes imply to add some smart information to the key in order to use it for different types of searchs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Hbase requires Hadoop</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hbase requires a Hadoop infrastructure to operate (HDFS, MapReduce). If you are already using Hadoop great, if not, it could be hard to swallow.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Proper Installation could be cumbersome</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Partly because the Hadoop ecosystem, it&#8217;s painful to install even a simple Hadoop cluster if you&#8217;re not using a commercial solution like Cloudera or Amazon EMR.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation_options">Installation options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Although HBase could be executed <a href="http://hbase.apache.org/book.html#quickstart">in standalone version for testing purposes</a>, a production environment requires a minimal infrastructure, and unless you&#8217;ve got a dedicated sysadmin team and/or a good devops environment you&#8217;re going end up paying whether is on premises or on cloud.</p>
</div>
<div class="sect2">
<h3 id="on_premises">On premises</h3>
<div class="paragraph">
<p>It sucks but, until 2019 the <a href="https://ambari.apache.org/">Project Ambari</a> provided an easy and powerful way of installing any part of the Hadoop ecosystem on premises, unfortunately with <a href="https://www.cloudera.com/about/news-and-blogs/press-releases/2019-01-03-cloudera-and-hortonworks-complete-planned-merger.html">the merge of Hortonworks and Cloudera</a>, that&#8217;s not the case anymore. Now Ambari requires some of the Cloudera modules, which are not open sourced. THe comercial version of Ambari has become <a href="https://es.cloudera.com/products/hdp.html">Hortonworks Data Platform</a></p>
</div>
</div>
<div class="sect2">
<h3 id="on_cloud">On cloud</h3>
<div class="paragraph">
<p>The only service I&#8217;ve checked so far is <a href="https://aws.amazon.com/emr/">Amazon EMR</a>. Amazon EMR is a service that allows you to create a Hadoop ecosystem in the cloud quickly and easily. <a href="https://aws.amazon.com/emr/pricing/?nc=sn&amp;loc=4">The cost</a> of creating an EMR cluster depends on a fixed cost, the computation usage and disk requirements of your application. You can either use the AWS UI console or also use the <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs">Terraform AWS provider</a> if you have Terraform as part of your toolbox.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources">Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="http://hbase.apache.org/">Hbase site</a></p>
</li>
<li>
<p><a href="http://hbase.apache.org/book.html">Hbase guide</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next">Next</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="/blog/2021/08/hbase_series_02.html">Hbase Components</a></p>
</div>
</div>
</div></yieldScaped></section>
                </div>
            </div><div id="sidebar">
                <div class="inner">
                    <!--Menu--><nav id="menu">
                        <header class="major">
                            <h2>Menu</h2>
                        </header><ul>
                            <li>
                                <a href="/index.html">Latests entries</a>
                            </li><li>
                                <a href="/archive.html">Archive</a>
                            </li><li>
                                <a href="/stats.html">Statistics</a>
                            </li><li>
                                <a href="/about.html">About</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div><script src="/js/jquery.min.js"></script>
            <script src="/js/browser.min.js"></script>
            <script src="/js/breakpoints.min.js"></script>
            <script src="/js/util.js"></script>
            <script src="/js/main.js"></script>
            <script src="/js/highlight.pack.js"></script>
            <script type="text/javascript">
                
        document.addEventListener('DOMContentLoaded', (event) => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightBlock(block);
            });
        });
    
            </script>
        </div>
    </body>
</html>
